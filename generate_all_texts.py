#!/usr/bin/env python3
"""
Скрипт для генерации всех астрологических текстов.
Генерирует описания для планет в знаках, домах и аспектов.
"""

import json
from pathlib import Path

# Планеты
PLANETS = {
    "Sun": "Солнце",
    "Moon": "Луна",
    "Mercury": "Меркурий",
    "Venus": "Венера",
    "Mars": "Марс",
    "Jupiter": "Юпитер",
    "Saturn": "Сатурн",
    "Uranus": "Уран",
    "Neptune": "Нептун",
    "Pluto": "Плутон",
    "North_node": "Северный узел",
    "South_node": "Южный узел",
    "Lilith": "Лилит"
}

# Знаки зодиака
SIGNS = {
    "Ari": "Овне",
    "Tau": "Тельце",
    "Gem": "Близнецах",
    "Cnc": "Раке",
    "Leo": "Льве",
    "Vir": "Деве",
    "Lib": "Весах",
    "Sco": "Скорпионе",
    "Sag": "Стрельце",
    "Cap": "Козероге",
    "Aqu": "Водолее",
    "Pis": "Рыбах"
}

# Дома
HOUSES = {str(i): f"{i} доме" for i in range(1, 13)}

# Аспекты
ASPECTS = {
    "Conjunction": "соединение",
    "Sextile": "секстиль",
    "Square": "квадрат",
    "Trine": "тригон",
    "Opposition": "оппозиция"
}


# === ГЕНЕРАТОРЫ ТЕКСТОВ ===

def generate_planet_in_sign_text(planet_ru, sign_ru):
    """Генерация текста для планеты в знаке"""
    templates = {
        "Солнце": {
            "Овне": "Солнце в Овне наделяет личность яркой индивидуальностью, инициативностью и стремлением к лидерству. Вы — прирожденный первопроходец, который не боится идти неизведанными путями и брать на себя ответственность. Ваша энергия направлена на активное самовыражение и достижение целей. Вы склонны действовать быстро и решительно, опираясь на интуицию и внутреннюю уверенность. Ваша честность и прямолинейность привлекают окружающих, хотя иногда излишняя импульсивность может создавать трудности. Важно научиться терпению и умению прислушиваться к мнению других, сохраняя при этом свою природную спонтанность и страсть к жизни. Ваш огненный темперамент требует выхода в творчестве, спорте или предпринимательстве.",
            "Тельце": "Солнце в Тельце дарует стабильность, практичность и любовь к материальным благам. Вы цените комфорт, красоту и гармонию в окружающем мире. Ваша сила — в упорстве и последовательности: начав дело, вы всегда доводите его до конца. Вы обладаете тонким вкусом и художественным чутьем, что проявляется в выборе окружения и стиля жизни. Природная надежность делает вас прекрасным другом и партнером. Однако склонность к упрямству и консерватизму может мешать адаптации к переменам. Важно научиться гибкости, не теряя при этом своей внутренней устойчивости. Ваша связь с природой и материальным миром дает вам уникальную способность создавать долговременные ценности.",
            "Близнецах": "Солнце в Близнецах наделяет живым умом, любознательностью и коммуникативными талантами. Вы легко устанавливаете контакты, быстро усваиваете информацию и умеете адаптироваться к любой ситуации. Ваш интеллект многогранен: вы интересуетесь множеством тем одновременно. Вербальные способности делают вас отличным рассказчиком, учителем или посредником. Ваша гибкость и открытость новому помогают находить нестандартные решения. Однако склонность к поверхностности и распылению энергии может мешать углублению в предмет. Важно научиться концентрации и завершению начатого. Ваш дар общения — ключ к самореализации.",
            "Раке": "Солнце в Раке дарует глубокую эмоциональность, интуицию и заботливость. Вы чувствительны к настроениям окружающих и обладаете природной способностью к эмпатии. Семья и дом имеют для вас первостепенное значение. Вы создаете атмосферу тепла и безопасности для близких. Ваша память цепка, особенно к эмоционально окрашенным событиям. Творческое воображение и богатый внутренний мир делают вас прекрасным психологом или художником. Однако излишняя ранимость и склонность к переживаниям могут истощать. Важно научиться эмоциональным границам и защите своего пространства. Ваша способность к глубоким чувствам — ваша сила.",
            "Льве": "Солнце во Льве наделяет харизмой, творческим потенциалом и королевским достоинством. Вы рождены сиять и вдохновлять других. Ваша щедрость, великодушие и природное обаяние притягивают людей. Вы стремитесь к признанию и не боитесь быть в центре внимания. Креативность пронизывает все, что вы делаете. Ваша уверенность в себе и оптимизм помогают преодолевать препятствия. Однако склонность к драматизации и потребность в восхищении могут создавать сложности. Важно развивать скромность и внимание к другим. Ваша способность вдохновлять — настоящий дар, используйте его мудро.",
            "Деве": "Солнце в Деве дарует аналитический ум, практичность и стремление к совершенству. Вы обладаете острым вниманием к деталям и способностью видеть то, что ускользает от других. Ваша работоспособность и ответственность делают вас незаменимым специалистом. Вы умеете систематизировать, анализировать и оптимизировать любые процессы. Служение и помощь другим приносят вам истинное удовлетворение. Однако излишняя критичность к себе и окружающим может мешать гармонии. Важно принять несовершенство мира и научиться расслабляться. Ваша способность к точности и порядку — ценный талант.",
            "Весах": "Солнце в Весах наделяет чувством гармонии, дипломатическими способностями и любовью к красоте. Вы стремитесь к балансу во всех сферах жизни и обладаете природным чувством справедливости. Ваш шарм и умение находить компромиссы делают вас прекрасным партнером и посредником. Эстетическое восприятие мира побуждает окружать себя прекрасным. Вы ценитедонравятся конфликты и стремитесь к мирному разрешению споров. Однако нерешительность и зависимость от мнения других могут затруднять выбор. Важно развивать собственную позицию, сохраняя дипломатичность. Ваша способность видеть разные стороны вопроса — уникальный дар.",
            "Скорпионе": "Солнце в Скорпионе дарует интенсивность, глубину и трансформационную силу. Вы обладаете проникновенной интуицией и способностью видеть скрытые мотивы людей. Ваша страстность и целеустремленность не знают компромиссов. Вы не боитесь темных сторон жизни и способны возрождаться из пепла кризисов. Магнетическая притягательность и внутренняя сила делают вас влиятельной личностью. Однако склонность к контролю и ревности может разрушать отношения. Важно научиться доверию и отпусканию. Ваша способность к глубинной трансформации — величайший потенциал.",
            "Стрельце": "Солнце в Стрельце наделяет оптимизмом, философским складом ума и жаждой приключений. Вы вечный искатель истины, стремящийся к расширению горизонтов. Ваша открытость, честность и щедрость духа вдохновляют окружающих. Вы любите путешествия, обучение и исследование новых культур. Природный идеализм и вера в лучшее помогают преодолевать трудности. Однако чрезмерная прямолинейность и нетерпеливость могут ранить других. Важно развивать такт и внимание к деталям. Ваша способность видеть большую картину и вдохновлять на подвиги — ваше предназначение.",
            "Козероге": "Солнце в Козероге дарует амбициозность, дисциплину и стратегическое мышление. Вы целеустремленно движетесь к вершинам, не боясь трудностей. Ваша ответственность, практичность и выносливость делают вас надежным профессионалом. Вы умеете планировать на долгосрок и терпеливо строить фундамент успеха. Уважение традиций и иерархий дает вам устойчивость. Однако склонность к пессимизму и чрезмерной серьезности может ограничивать радость жизни. Важно научиться легкости и спонтанности. Ваша способность достигать целей через упорный труд — основа вашего величия.",
            "Водолее": "Солнце в Водолее наделяет оригинальностью, независимостью и гуманистическими идеалами. Вы мыслитель и новатор, видящий будущее раньше других. Ваша индивидуальность и нежелание следовать толпе делают вас уникальным. Вы цените свободу и интеллектуальную стимуляцию. Дружба и социальные связи важны для вас, но вы сохраняете дистанцию. Ваши прогрессивные идеи могут менять мир. Однако эмоциональная отстраненность может создавать барьеры в близких отношениях. Важно научиться выражать чувства. Ваша способность видеть нестандартные решения — дар человечеству.",
            "Рыбах": "Солнце в Рыбах дарует глубокую чувствительность, интуицию и духовность. Вы обладаете богатым воображением и творческими способностями. Ваша эмпатия и сострадание делают вас целителем душ. Вы легко улавливаете невидимые течения и атмосферу пространства. Музыка, искусство и мистика глубоко резонируют с вами. Ваша способность к самопожертвованию и служению вдохновляет. Однако склонность к эскапизму и потеря границ могут приводить к трудностям. Важно научиться заземлению и защите энергии. Ваша связь с тонким миром — источник вдохновения и исцеления."
        }
    }
    
    # Для остальных планет генерируем стандартный текст
    if planet_ru in templates and sign_ru in templates[planet_ru]:
        return templates[planet_ru][sign_ru]
    
    return f"{planet_ru} в {sign_ru} указывает на уникальное сочетание энергий этой планеты и зодиакального знака. Это положение влияет на соответствующую сферу вашей личности, окрашивая её качествами {sign_ru.replace('е', 'а').replace('ах', 'ов').replace('це', 'ца')}. Изучение этого аспекта вашей натальной карты поможет лучше понять себя и раскрыть свой потенциал в данной области жизни."


def generate_planet_in_house_text(planet_ru, house):
    """Генерация текста для планеты в доме"""
    return f"{planet_ru} в {house} подчеркивает важность сферы жизни, управляемой этим домом. Энергия планеты проявляется через темы и события, связанные с {house}. Это положение указывает, где вы вкладываете свою энергию и как реализуете потенциал планеты в повседневной жизни."


def generate_aspect_text(planet1_ru, planet2_ru, aspect_ru):
    """Генерация текста для аспекта"""
    return f"{aspect_ru.capitalize()} между {planet1_ru} и {planet2_ru} создает особое взаимодействие энергий этих планет. Этот аспект влияет на то, как различные стороны вашей личности работают вместе. Гармоничные аспекты (тригон, секстиль) способствуют легкому проявлению энергий, напряженные (квадрат, оппозиция) требуют работы над интеграцией, соединение усиливает обе планеты."


# === ОСНОВНАЯ ФУНКЦИЯ ===

def generate_all_texts():
    """Генерация всех текстов"""
    texts_file = Path(__file__).parent / "texts.json"
    
    with open(texts_file, "r", encoding="utf-8") as f:
        data = json.load(f)
    
    # Генерация текстов для планет в знаках
    print("Генерация: Планеты в знаках...")
    for planet_en, planet_ru in PLANETS.items():
        if planet_en not in data["signs"]:
            data["signs"][planet_en] = {}
        for sign_en, sign_ru in SIGNS.items():
            text = generate_planet_in_sign_text(planet_ru, sign_ru)
            data["signs"][planet_en][sign_en] = text
    
    # Генерация текстов для планет в домах
    print("Генерация: Планеты в домах...")
    for planet_en, planet_ru in PLANETS.items():
        if planet_en not in data["houses"]:
            data["houses"][planet_en] = {}
        for house_num, house_ru in HOUSES.items():
            text = generate_planet_in_house_text(planet_ru, house_ru)
            data["houses"][planet_en][house_num] = text
    
    # Генерация текстов для аспектов
    print("Генерация: Аспекты...")
    planet_list = list(PLANETS.keys())
    for i, p1_en in enumerate(planet_list):
        for p2_en in planet_list[i+1:]:
            pair_key = f"{p1_en}_{p2_en}"
            if pair_key not in data["aspects"]:
                data["aspects"][pair_key] = {}
            for aspect_en, aspect_ru in ASPECTS.items():
                text = generate_aspect_text(PLANETS[p1_en], PLANETS[p2_en], aspect_ru)
                data["aspects"][pair_key][aspect_en] = text
    
    # Сохранение
    with open(texts_file, "w", encoding="utf-8") as f:
        json.dump(data, f, ensure_ascii=False, indent=2)
    
    print(f"✅ Готово! Сгенерировано:")
    print(f"   - Планеты в знаках: {len(PLANETS) * len(SIGNS)} текстов")
    print(f"   - Планеты в домах: {len(PLANETS) * len(HOUSES)} текстов")
    print(f"   - Аспекты: {len(data['aspects']) * len(ASPECTS)} текстов")
    print(f"   Всего: {len(PLANETS) * len(SIGNS) + len(PLANETS) * len(HOUSES) + len(data['aspects']) * len(ASPECTS)} текстов")


if __name__ == "__main__":
    generate_all_texts()

